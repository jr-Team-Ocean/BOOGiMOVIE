<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>내가 찜한 상품</title>
    <link rel="stylesheet" th:href="@{/css/myPage/myFavorite.css}">
    <link rel="stylesheet" th:href="@{/css/common/header.css}">
    <link rel="stylesheet" th:href="@{/css/common/font.css}">
    <link rel="stylesheet" th:href="@{/css/common/footer.css}">
    <link rel="stylesheet" th:href="@{/css/myPage/myPage_sideBar.css}">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100..900&display=swap" rel="stylesheet">

</head>

<body>

    <!-- header -->
    <th:block th:replace="~{common/header_no_search}">header_no_search.html</th:block>

    <div class="body_container">

        <!-- side-Menu -->
        <th:block th:replace="~{myPage/myPage_sideBar}">myPage_sideBar.html</th:block>

        <main>
            <header class="section_header">
                <h1>내가 찜한 상품</h1>
            </header>

            <div class="select_container">
                <select class="search_order" id="search_order">
                    <option value="recent">찜한순</option>
                    <option value="name">가나다순</option>
                    <option value="price">가격순</option>
                </select>
            </div>

            <section class="search_content">

                <div class="search_box_menu" id="search_box_menu">
                    <h3>검색 결과</h3>
                </div>

                <!-- 타임리프로 초기 데이터 렌더링 -->
                <th:block th:each="favorite : ${favorites}">
                    <div class="search_box_results">
                        
                        <div class="search_box_pic">
                            <a th:href="@{/product/detail/{id}(id=${favorite.productNo})}">
                                <img th:src="${favorite.productImage}" th:alt="${favorite.productTitle}">
                            </a>
                        </div>

                        <div class="search_box_detail">
                            <div class="title" th:text="${favorite.productTitle}">상품명</div>
                            
                            <div th:text="${favorite.favoriteDate}">2026년 01월 01일</div>
                            
                            <div class="price"
                                th:text="'상품상태(' + ${favorite.productStatus} + ')/판매가격(' + ${#numbers.formatInteger(favorite.productPrice, 3, 'COMMA')} + '원)'">
                            </div>
                        </div>

                        <div class="search_box_like">
                            <a th:href="@{#}" th:onclick="'removeFavorite(' + ${favorite.productNo} + '); return false;'">
                                <img th:src="@{/svg/heart_filled.svg}" alt="찜 해제">
                            </a>
                            <div th:text="${favorite.favoriteDate}"></div>
                        </div>

                    </div>
                </th:block>

                <!-- 찜한 상품이 없을 때 메시지 (개발용: 백엔드 완성 후 th:if 활성화) -->
                <th:block th:if="${#lists.isEmpty(favorites)}">
                    <div style="text-align: center; padding: 60px 20px; color: #999;">
                        <p style="font-size: 16px; margin-bottom: 10px;">찜한 상품이 없습니다.</p>
                        <p style="font-size: 14px;">마음에 드는 상품을 찜해보세요!</p>
                    </div>
                </th:block>                

            </section>

            <div class="pagination" th:if="${pageDto != null and pageDto.totalCount > 0}">
    
                <a th:href="@{/myPage/likedList(page=${pageDto.prevPage})}" 
                th:if="${pageDto.blockStart > 1}">&lt;</a>

                <th:block th:each="pageNumber : ${#numbers.sequence(pageDto.blockStart, pageDto.blockEnd)}">
                    <a th:href="@{/myPage/likedList(page=${pageNumber})}"
                    th:text="${pageNumber}"
                    th:classappend="${pageNumber == pageDto.currentPage} ? 'active' : ''">
                    </a>
                </th:block>

                <a th:href="@{/myPage/likedList(page=${pageDto.nextPage})}" 
                th:if="${pageDto.blockEnd < pageDto.totalPage}">&gt;</a>
                
            </div>
        </main>

    </div>

    
    <!-- footer -->
    <th:block th:replace="~{common/footer}">footer.html</th:block>
 
    <script th:src="@{/js/myPage/myFavorite.js}"></script>

</body>

</html>






